<!doctype html>
<html>
<head><meta charset="utf-8"><title>Reset Password</title></head>
<body>
  <h2>Reset Password</h2>

  <input id="newPassword" type="password" placeholder="New password" required />
  <button onclick="resetNow()">Reset</button>

  <p id="msg"></p>

  <script>
    const params = new URLSearchParams(location.search);
    const token = params.get("token");
    const role = params.get("role");

    async function resetNow() {
      const newPassword = document.getElementById("newPassword").value;

      const res = await fetch("/api/auth/reset-password", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({ role, token, newPassword })
      });

      const data = await res.json();
      document.getElementById("msg").textContent = data.message || "Done";
    }
  </script>
</body>
</html>
